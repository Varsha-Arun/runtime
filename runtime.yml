resources:
  - name: test
    type: GitRepo
    repoPath: vijayreddy1991/runtime
    configuration:
      integrationName: vijay_github
      branches:
        only: master
    version:
      sha: master
  - name: webhookIncoming
    type: Webhook
    configuration:
      integrationName: vijay_internal
    version:
      payload: "reddy"

#   - name: webhookOutging
#     type: webhook
#     configuration:
#       integrationName: vijay_external
#     version:
#       payload: "vijay"      
      
  - name: runtimeincoming
    setup: 
      environmentVariables:
        readOnly:
          Number: 27
      runtime:       
        type: image
        image:
#           auto:
#             language: nodejs
#             versions:
#               - 10.15.3
          custom:
            name: "drydock/u18node"
            tag: "master"
            options: "--env VIJAY=kumar"
        requires:
          resources:
             - vijay_internal  
    steps:    
      - name: incoming
        type: bash
#         setup:
#           runtime:
#             type: image
#             image:
#              custom:
#                name: drydock/u18node
#                tag: master
        #triggeredBy:
        #   resources:
        #     - test
#         outputResources:
#           - vijay_external
        execution:
          onExecute:
            - echo "vijay"
#             - sudo dd if=/dev/urandom of=file.txt count=1000000 bs=1100
            - printenv
            - node --version
# pipelines:
#   - name: runtimeoutgoing
#     steps:
#       - name: outgoing
#         type: bash
#         execution:
#           onExecute:
#             - echo yay
#             - printenv            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
#             - write_output webhookIntegrationResource1 payload=$STEP_ID
#             - save_run_state $(pwd)/file.txt impfile

#       - name: test2
#         type: bash   
#         triggeredBy:
#           steps:
#             - test1
#         execution:
#           onExecute:
#             - echo "test2"
            

#       - name: test3
#         type: bash  
#         triggeredBy:
#           steps:
#             - test2
#         execution:
#           onExecute:
#             - echo "Test3"
#             - restore_run_state impfile exmple.txt
#             - du -h

#       - name: test4
#         type: bash 
#         triggeredBy:
#           steps:
#             - test3
#         execution:
#           onExecute:
#             - echo "test4"
#             - restore_run_state impfile exmple.txt
#             - du -h
